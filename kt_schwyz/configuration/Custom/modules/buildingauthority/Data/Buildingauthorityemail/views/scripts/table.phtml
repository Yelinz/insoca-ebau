<div class="table-container column column-100%">
	<div class="title">
		<ul>
			<li class="type">
				<span class="icon icon-info"  aria-hidden="true"></span>
			</li>
			<li class="active">
				<a href="javascript:void(0)">
					<span class="icon icon-puzzle"  aria-hidden="true"></span>
					<?php echo $this->translate("Building authority emails") ?>
				</a>
			</li>
			<li class="help">
				<a href="javascript:void(0)">
					<span class="icon icon-question"  aria-hidden="true"></span>
				</a>
				<div class="tooltip">
					<p>
						<?php echo $this->translate('The actions are available through a context menu. Right click to trigger the context menu.') ?><br/>
					</p>
				</div>
			</li>
		</ul>
	</div>
	<table class="datatables context-menu buildingauthorityemail" data-menu="buildingauthorityemail" data-display-length="25" data-disable-sorting="1">
		<thead>
			<tr>
				<th class="no-sort">
					<?php echo $this->translate('Button') ?>
				</th>
				<th class="no-sort">
					<?php echo $this->translate('Email subject') ?>
				</th>
				<th class="no-sort">
					<?php echo $this->translate('From email') ?>
				</th>
				<th class="no-sort">
					<?php echo $this->translate('Receiver') ?>
				</th>
			</tr>
		</thead>
		<tbody>
				<?php if (count($this->rows)) :?>
					<?php foreach ($this->rows as $row) : ?>
						<tr data-id="<?php echo $row->baEmailId ?>">
							<td>
								<span class="icon icon-puzzle" area-hidden="true"></span>
								<?php echo $this->escape($row->getButton()->label); ?>
							</td>
							<td>
								<?php echo $this->escape($row->emailSubject); ?>
							</td>
							<td>
								<?php echo $this->escape($row->fromEmail); ?>
							</td>
							<td>
								<?php echo $this->escape($row->receiverQuery); ?>
							</td>
						</tr>
					<?php endforeach ?>
					<?php else : ?>
						<tr class="alert information">
							<td class="empty">
								<span aria-hidden="true" class="icon-info"></span>
								<?php echo $this->translate('No building authority emails found.') ?>
							</td>
							<td class="empty"></td>
							<td class="empty"></td>
							<td class="empty"></td>
						</tr>
				<?php endif ?>
		</tbody>
</table>
</div>

<ul class="buildingauthorityemail-menu context-menu">
	<li>
		<span><?php echo $this->translate('Building authority email')?></span>
	</li>
	<li class="edit-only">
		<a href="<?php echo $this->url(array(
				'controller' => 'module_data-loader',
				'action'     => 'edit',
				'module-id'  => 'buildingauthority',
				'data-id'    => 'buildingauthorityemail',
				'id'         => '%id'
			));?>">
			<span class="icon-pencil"></span>
			<?php echo $this->translate('Edit') ?>
		</a>
	</li>
	<li class="edit-only" data-confirm-dialog="true" 
		data-title="<?php echo $this->translate('buildingAuthority') ?>" 
		data-confirm-message="<?php echo $this->translate('Are you sure you want to delete this building authority email?') ?>">
		<a href="<?php echo $this->url(array(
				"controller" => 'module_data-loader',
				"action"     => "delete",
				"module-id"  => "buildingauthority",
				"data-id"    => "buildingauthorityemail",
				"id"         => '%id'
			))?>">
			<span class="icon-remove"></span>
			<?php echo $this->translate('Delete') ?>
		</a>
	</li>
	<li>
		<a href="<?php echo $this->url(array(
				'controller' => 'module_data-loader',
				'action'     => 'add',
				'module-id'  => 'buildingauthority',
				'data-id'    => 'buildingauthorityemail')) ?>">
			<span class="icon-plus"></span>
			<?php echo $this->translate('Add') ?>
		</a>
	</li>
</ul>
