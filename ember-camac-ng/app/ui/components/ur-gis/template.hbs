{{#unless @disabled}}
  <div>
    <button class="button" type="button" {{on "click" (perform this.search)}}>
      {{t "gis.findParcel"}}
    </button>
  </div>
{{/unless}}

<LeafletMap
  @lat={{this.latlng.lat}}
  @lng={{this.latlng.lng}}
  @zoom={{this.zoom}}
  @minZoom={{this.minZoom}}
  @maxZoom={{this.maxZoom}}
  @onClick={{perform this.getFeatures value="latlng"}}
  @onLoad={{perform this.handleLoad}}
  class="uk-width-1-1 uk-height-large uk-margin" as |map|
>
  <map.wms-tile
    @transparent={{true}}
    @format="image/png"
    @version="1.1.1"
    @layers={{this.layers}}
    @url={{this.gisURL}}
  />
  <map.wms-tile
    @transparent={{true}}
    @format="image/png"
    @version="1.1.1"
    @layers={{this.lowOpacityLayers}}
    @url={{this.gisURL}}
    @opacity={{0.5}}
  />

  {{#each this.parcels as |parcel|}}
    <map.polygon
      @locations={{parcel.coordinates}}
      @clickable={{false}}
      @color="red"
    >
      {{#if parcel.number}}
        <TooltipLayer @sticky={{true}}>
          <strong>
            {{parcel.number}} {{parcel.municipality}}
          </strong>

          <i>
            {{parcel.egrid}}
          </i>
        </TooltipLayer>
      {{/if}}
    </map.polygon>
  {{/each}}
</LeafletMap>

<p class="parcelInfo"></p>
{{#unless @disabled}}
  <div>
    <button
      class="button uk-margin-small-top"
      disabled={{
        or
        (not this.parcels)
        this.getFeatures.isRunning
        this.applySelection.isRunning
      }}
      type="button"
      {{on "click" (perform this.applySelection)}}
    >
      {{t "gis.submitParcel"}}
    </button>
  </div>
{{/unless}}
