<h2>Involvierte Personen</h2>

<table class="uk-table uk-table-striped uk-margin-remove uk-table-small uk-table-responsive uk-table-middle">
  <thead>
    <tr>
      <th title="E-Mail">E-Mail</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {{#each applicants as |row|}}
      <tr>
        <td>{{get row "email"}}</td>
        <td class="uk-text-right">
          {{#if (gt applicants.length 1)}}
            <button type="button" title="Eintrag Löschen" data-test-delete-row class="uk-icon-button" uk-icon="trash" {{action (perform deleteRow) row}}></button>
          {{/if}}
        </td>
      </tr>
    {{/each}}
  </tbody>
  <tfoot>
    <tr>
      <td colspan="2" class="uk-text-center">
        <div uk-toggle="target: #modal-applicants">{{#uk-button size='small' on-click=(perform addRow)}}{{uk-icon 'plus'}}{{/uk-button}}</div>
      </td>
    </tr>
  </tfoot>
</table>

<div id="modal-applicants" uk-modal>
  <div class="uk-modal-dialog uk-modal-body">
    <form {{action (perform saveRow) on='submit'}}>
      <button type="button" class="uk-modal-close-default" uk-close></button>

      <h2 class="uk-modal-title">Eintrag hinzufügen</h2>

      <div class="uk-margin">
        <label class="uk-form-label uk-text-bolder {{if (get this (concat '_value.error.' 'email')) 'uk-text-danger'}}">
          E-Mail
          <span class="uk-text-danger">*</span>
        </label>
        {{input type="email" on-change=(action 'change' 'email') value=(get _value 'email') class="uk-input"}}
        {{#with (get this (concat '_value.error.' 'email')) as |error|}}
          {{camac-input-error error.validation}}
        {{/with}}
      </div>
      {{camac-input-error saveErrors}}

      <div class="uk-text-right">
        {{#uk-button class="uk-modal-close"}}Abbrechen{{/uk-button}}
        {{#uk-button loading=saveRow.isRunning disabled=(not _value.isValid) color='primary' type='submit'}}Speichern{{/uk-button}}
      </div>
    </form>
  </div>
</div>
