{{#if this.forms.isRunning}}
  <UkFlex @horizontal="center" class="uk-padding uk-animation-fade">
    <UkSpinner @ratio={{3}} />
  </UkFlex>
{{else}}
  <h4 class="uk-text-center uk-margin-large-bottom">Um welche Art von Gesuch handelt es sich?</h4>

  <div uk-grid class="uk-grid-small">
    <div uk-margin class="uk-width-1-1 uk-width-1-3@s uk-flex-column">
      <h4 class="uk-text-center">
        Beratung und Vorentscheid {{camac-hint-dialog this.infoCol1}}
      </h4>
      <NewFormGridEntry
        @form={{find-by "name" "vorabklarung" this.forms.lastSuccessful.value}}
        @onSetForm={{fn (mut @model.form)}}
        @selectedForm={{@model.form}}
      />
      <NewFormGridEntry
        @form={{find-by
          "name"
          "vorentscheid-gemass-ss84-pbg"
          this.forms.lastSuccessful.value
        }}
        @onSetForm={{fn (mut @model.form)}}
        @selectedForm={{@model.form}}
      />
    </div>
    <div uk-margin class="uk-width-1-1 uk-width-1-3@s uk-flex-column">
      <h4 class="uk-text-center">
        Baubewilligung {{camac-hint-dialog this.infoCol2}}
      </h4>
      <NewFormGridEntry
        @form={{find-by
          "name"
          "baugesuch-reklamegesuch"
          this.forms.lastSuccessful.value
        }}
        @onSetForm={{fn (mut @model.form)}}
        @selectedForm={{@model.form}}
      />
      <NewFormGridEntry
        @form={{find-by "name" "projektanderung" this.forms.lastSuccessful.value}}
        @onSetForm={{fn (mut @model.form)}}
        @selectedForm={{@model.form}}
      />
      <NewFormGridEntry
        @form={{find-by
          "name"
          "technische-bewilligung"
          this.forms.lastSuccessful.value
        }}
        @onSetForm={{fn (mut @model.form)}}
        @selectedForm={{@model.form}}
      />
      <NewFormGridEntry
        @form={{find-by
          "name"
          "baumeldung-fur-geringfugiges-vorhaben"
          this.forms.lastSuccessful.value
        }}
        @onSetForm={{fn (mut @model.form)}}
        @selectedForm={{@model.form}}
      />
    </div>
    <div uk-margin class="uk-width-1-1 uk-width-1-3@s uk-flex-column">
      <h4 class="uk-text-center">
        Spezielle Gesuche {{camac-hint-dialog this.infoCol3}}
      </h4>
      <NewFormGridEntry
        @form={{find-by
          "name"
          "anlassbewilligungen-verkehrsbewilligungen"
          this.forms.lastSuccessful.value
        }}
        @onSetForm={{fn (mut @model.form)}}
        @selectedForm={{@model.form}}
      />
      <NewFormGridEntry
        @form={{find-by
          "name"
          "konzession-fur-wasserentnahme"
          this.forms.lastSuccessful.value
        }}
        @onSetForm={{fn (mut @model.form)}}
        @selectedForm={{@model.form}}
      />
      <NewFormGridEntry
        @form={{find-by
          "name"
          "projektgenehmigungsgesuch-gemass-ss15-strag"
          this.forms.lastSuccessful.value
        }}
        @onSetForm={{fn (mut @model.form)}}
        @selectedForm={{@model.form}}
      />
      <NewFormGridEntry
        @form={{find-by
          "name"
          "plangenehmigungsgesuch"
          this.forms.lastSuccessful.value
        }}
        @onSetForm={{fn (mut @model.form)}}
        @selectedForm={{@model.form}}
      />
    </div>
    {{#if (eq "municipality" groupData.lastSuccessful.value.role.permission)}}
      <div uk-margin class="uk-flex-center uk-width-1-1 uk-width-1-3@s uk-flex-column">
        <h4 class="uk-text-center">Interne Gesuche</h4>
        {{new-form-grid-entry
          form=(find-by 'name' 'geschaeftskontrolle' forms.lastSuccessful.value)
          onSetForm=(action (mut model.form))
          selectedForm=model.form
        }}
      </div>
    {{/if}}
  </div>

  <UkFlex @horizontal="right" class="uk-margin-top">
    <UkButton
      @disabled={{or (not @model.form.id) this.save.isRunning}}
      @loading={{this.save.isRunning}}
      @color="primary"
      @on-click={{perform this.save}}
    >
      Weiter
    </UkButton>
  </UkFlex>
{{/if}}
