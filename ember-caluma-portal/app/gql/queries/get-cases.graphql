#import 'ember-caluma/gql/fragments/field-answer'

query GetCases(
  $cursor: String
  $documentFormFilter: String
  $metaValueFilters: [MetaValueFilterType]
  $hasAnswerFilters: [HasAnswerFilterType]
) {
  allCases(
    first: 15
    after: $cursor
    documentForm: $documentFormFilter
    metaValue: $metaValueFilters
    hasAnswer: $hasAnswerFilters
    workflow: "building-permit"
    orderBy: META_CAMAC_INSTANCE_ID_DESC
  ) {
    pageInfo {
      hasNextPage
      endCursor
    }
    totalCount
    edges {
      node {
        id
        meta
        createdAt
        status
        document {
          id
          form {
            slug
            name
          }
          answers(
            questions: [
              "gemeinde"
              "strasse-gesuchstellerin"
              "nummer-gesuchstellerin"
              "plz-gesuchstellerin"
              "ort-gesuchstellerin"
              "anfrage-zur-vorabklaerung"
              "beschreibung-bauvorhaben"
              "gemeinde"
              "strasse-flurname"
              "nr"
              "ort-grundstueck"
            ]
          ) {
            edges {
              node {
                ...FieldAnswer
              }
            }
          }
        }
      }
    }
  }
}
